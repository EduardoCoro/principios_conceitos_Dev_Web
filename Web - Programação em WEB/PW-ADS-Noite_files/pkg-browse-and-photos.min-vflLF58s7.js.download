define("modules/clean/react/browse/util",["require","exports","modules/clean/react/browse/constants","modules/clean/react/browse/models","modules/clean/em_string","modules/clean/filepath","modules/core/i18n"],function(e,t,i,o,n,r,a){"use strict";function l(e){if(1===e.count()){var t=e.first(),i=r.filename(t.fq_path);return n.Emstring.em_snippet(i,13.5)}if(e.count()>1){var o=function(e){return e.isDeleted},l=e.some(o)&&!e.every(o),s=e.toArray().filter(function(e){return e.is_dir}),c=e.toArray().filter(function(e){return!e.is_dir});if(l)return a._("No available actions");var d=[];if(c.length){var u=a.ungettext("%(num_files)d file","%(num_files)d files",c.length).format({num_files:c.length});d.push(u)}if(s.length){var u=a.ungettext("%(num_folders)d folder","%(num_folders)d folders",s.length).format({num_folders:s.length});d.push(u)}return 2===d.length?a._("%(x)s and %(y)s",{comment:'\n            The whole string is a phrase like "2 files and 3 folders". \'x\' is\n            a string containing a phrase like "2 files" and \'y\' is a string\n            containing a phrase like "3 folders".\n          '}).format({x:d[0],y:d[1]}):d[0]}return""}function s(e,t){var i=e.count(),n=a._("You only have partial access");return i>0?1!==i||o.File.canViewFileMembers(e.first(),t)?a.ungettext("%(count)d item selected","%(count)d items selected",i).format({count:i}):o.File.isNoAccessSharedFolder(e.first())?a._("You don’t have access to this folder"):n:t&&!t.canViewContainingNSMembers?n:""}function c(e){return e.sync_setting?i.SyncSettingTranslations[e.sync_setting]:""}Object.defineProperty(t,"__esModule",{value:!0});t.describeFiles=l,t.getSelectedFilesText=s,t.getSyncSettingDescription=c}),define("modules/clean/react/file_viewer/async_controller",["require","exports"],function(e,t){"use strict";function i(){Array.from(document.querySelectorAll(r)).forEach(function(e){e.style.display&&e.setAttribute("data-preview-old-display",e.style.display),e.style.display="none"})}function o(){Array.from(document.querySelectorAll(r)).forEach(function(e){e.style.display=e.hasAttribute("data-preview-old-display")?e.getAttribute("data-preview-old-display"):""})}function n(t){var i=t.containerId,o=t.files,n=t.fileViewAction,r=t.fileViewOrigin,a=t.fileViewTarget,l=t.indexOfPreviewFile,s=t.onFileViewerDidMount,c=t.onFileViewerUnmount,d=t.shouldFocusComment,u=void 0!==d&&d,p=t.updateBrowserLocation,h=void 0===p||p,m=t.user;e(["modules/clean/react/file_viewer/controller"],function(e){e.open(o,l,m,i,{fileViewTarget:a,fileViewOrigin:r,fileViewAction:n,shouldFocusCommentInput:u,disableRouting:!h,onComponentDidMount:s,onComponentWillUnmount:c})})}Object.defineProperty(t,"__esModule",{value:!0});var r=[".maestro-chrome","#maestro-nav","#page-footer","#page-header","#page-sidebar","#browse-box",".growth-onboarding-progress-bar__container",".team-progress-bar-experience","#flash-upload-container"].join();t.hideElementsBehindFileViewer=i,t.showElementsBehindFileViewer=o,t.asyncOpenPreview=n}),define("modules/clean/react/files_view/constants",["require","exports","modules/clean/react/files_view/types","modules/core/i18n"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PAGE_HEADER_HEIGHT=96,t.DEFAULT_COLUMN_HEADER_HEIGHT=40,t.DEFAULT_ROW_HEIGHT=72,t.DEFAULT_VIEWPORT_TOP_OFFSET=t.DEFAULT_PAGE_HEADER_HEIGHT+t.DEFAULT_COLUMN_HEADER_HEIGHT,t.COMPACT_PAGE_HEADER_HEIGHT=76,t.COMPACT_COLUMN_HEADER_HEIGHT=48,t.COMPACT_VIEWPORT_TOP_OFFSET=t.COMPACT_PAGE_HEADER_HEIGHT+t.COMPACT_COLUMN_HEADER_HEIGHT,t.PINNED_TEAM_FOLDER_SECONDARY_HEADER_PADDING_TOP=12;t.LIST_VIEW_COLUMN_FLEX={3:["0 0 36px","1 1 50%","0 0 25%","0 0 25%"],2:["0 0 36px","1 1 60%","0 0 40%"],1:["0 0 36px","1 1 100%"]},t.LIST_VIEW_SEARCH_MODE_COLUMN_FLEX={2:["0 0 36px","1 1 66%","0 0 34%"],1:["0 0 36px","1 1 100%"]},t.GRID_VIEW_COLUMN_FLEX=["0 0 36px","1 1"],t.LIST_VIEW_COLUMNS=[{sortField:i.SortField.FILENAME,label:o._("Name"),popoverTriggerLabel:o._("Name"),isLocked:!0},{sortField:i.SortField.MODIFIED,label:o._("Modified"),popoverTriggerLabel:o._("Modified")},{sortField:i.SortField.SHARED_WITH,label:o._("Members"),popoverTriggerLabel:o._("Members")},{sortField:i.SortField.CATEGORY,label:o._("Type"),popoverTriggerLabel:o._("Type")},{sortField:i.SortField.EXTENSION,label:o._("Extension"),popoverTriggerLabel:o._("Extension")},{sortField:i.SortField.SIZE,label:o._("Size"),popoverTriggerLabel:o._("Size")}],t.GRID_VIEW_COLUMNS=[{sortField:i.SortField.FILENAME,label:o._("Name"),popoverTriggerLabel:o._("Name")},{sortField:i.SortField.MODIFIED,label:o._("Modified"),popoverTriggerLabel:o._("Modified")},{sortField:i.SortField.CATEGORY,label:o._("Type"),popoverTriggerLabel:o._("Type")},{sortField:i.SortField.EXTENSION,label:o._("Extension"),popoverTriggerLabel:o._("Extension")},{sortField:i.SortField.SIZE,label:o._("Size"),popoverTriggerLabel:o._("Size")}],t.SEARCH_LIST_VIEW_COLUMNS=[{sortField:i.SortField.FILENAME,label:"",popoverTriggerLabel:"",isLocked:!0,isSortDisabled:!0},{sortField:i.SortField.MODIFIED,label:o._("Modified"),popoverTriggerLabel:o._("Modified"),isLocked:!0,isSortDisabled:!0}],t.SELECTABLE_LIST_KEY_SCOPE="FilesViewSelectableList",t.TILE_GRID_SCOPE="FilesViewTileGrid",t.SELECTABLE_LIST_LINKED_OUTSIDE_CLASSES=[".bubble-menu-item-wrapper",".browse-menu",".context-menu",".react-file-viewer",".db-modal"],t.FilesViewTileGridConstants={NUM_THRESHOLD_ROWS:10,SCROLL_DELTA_THRESHOLD:1},t.AllNewFolderCreationStates=[i.NewFolderCreationState.CREATE_FOLDER_INACTIVE,i.NewFolderCreationState.PENDING_INPUT,i.NewFolderCreationState.SAVING_INPUT],t.AllRenameStates=[i.RenameState.PENDING_INPUT,i.RenameState.SAVING_INPUT],t.AllViewTypes=[i.ViewType.Grid,i.ViewType.List],t.AllDropTargetHighlightModes=[i.DropTargetHighlightMode.NONE,i.DropTargetHighlightMode.ALL_FOLDERS,i.DropTargetHighlightMode.NONSELECTED_FOLDERS,i.DropTargetHighlightMode.NONSELECTED_NONSHARED_FOLDERS,i.DropTargetHighlightMode.NONSELECTED_NONSHARED_NONTEAM_FOLDERS],t.AllSortFields=[i.SortField.FILENAME,i.SortField.MODIFIED,i.SortField.CATEGORY,i.SortField.EXTENSION,i.SortField.SIZE,i.SortField.SHARED_WITH,i.SortField.SYNC_SETTING],t.SortIsFilename=[i.SortField.FILENAME,i.SortField.CATEGORY,i.SortField.EXTENSION,i.SortField.SHARED_WITH,i.SortField.SYNC_SETTING],t.AllLoadingStates=[i.LoadingState.LOADED,i.LoadingState.LOADING_FIRST_PAGE,i.LoadingState.LOADING_REMAINING_PAGES],t.AllSortDirections=[i.SortDirection.ASCENDING,i.SortDirection.DESCENDING]}),define("modules/clean/react/files_view/drag_and_drop",["require","exports","modules/clean/react/browse/models","modules/clean/react/no-jquery"],function(e,t,i,o){"use strict";function n(e,t,i,n,r,a,s){l.add(e,"dragenter",function(e){(t()||i())&&!o.closestElement(e.target,r)&&a()&&(s(null),n())})}function r(e){l.remove(e,"dragenter")}function a(e,t,o,n,r,a,l,s){if(t||o){if(e.is_dir&&!(n&&o)){if(r)return;var c=a.isCurrentPathWriteable()&&!i.File.isReadOnlySharedFolder(e);l(e),s({path:e.fq_path,hasPermissionToUploadToFolder:c})}else l(null),s()}}Object.defineProperty(t,"__esModule",{value:!0});var l=new o.ScopedEventHandlers(document);t.setupExternalDragHandler=n,t.cleanupExternalDragHandler=r,t.onFileDragEnterItem=a}),define("modules/clean/react/files_view/file_grouper",["require","exports","modules/core/i18n","modules/clean/datetime","modules/clean/react/browse/constants","modules/clean/react/files_view/types","modules/clean/react/browse/models"],function(e,t,i,o,n,r,a){"use strict";function l(e){return e instanceof a.File?a.File.getCategoryDescription(e,!0):n.ExtensionCategories.DOCUMENT}function s(e){return e instanceof a.File?e.is_dir?n.FileTypeCapitalizedCategoryTranslations.FOLDER:a.File.getExtension(e).toUpperCase():u}function c(e){return e instanceof a.File&&e.ts?1e3*e.ts:e instanceof a.Paper?Date.parse(e.last_modified_date):0}function d(e,t,n){var a=[],d=[],h=null;if(t===r.SortField.CATEGORY)e.forEach(function(e,t){if(e){var i=l(e);i!==h&&(a.push(i),d.push(t),h=i)}});else if(t===r.SortField.EXTENSION)e.forEach(function(e,t){if(e){var i=s(e);if(i!==h){var o=i;""===i&&(o=u),a.push(o),d.push(t),h=i}}});else if(t===r.SortField.MODIFIED)if(n===r.SortDirection.DESCENDING){var m=o.getTimeBands(Date.now());e.forEach(function(e,t){if(e){var o,n=c(e);o=n>=m.today?i._("Today"):n>=m.yesterday?i._("Yesterday"):n>=m.thisWeek?i._("This week"):n>=m.lastWeek?i._("Last week"):n>=m.thisMonth?i._("This month"):n>=m.lastMonth?i._("Last month"):n>=m.lastThreeMonths?i._("Three months ago"):i._("Older"),o!==h&&(a.push(o),d.push(t),h=o)}})}else e.forEach(function(e,t){if(e){var i;if(c(e)){var n=new Date(c(e)),r=n.getMonth(),l=n.getFullYear();i=o.month_with_year(r,l)}else i=p;i!==h&&(a.push(i),d.push(t),h=i)}});return{sectionLabels:a,sectionStartIndices:d}}Object.defineProperty(t,"__esModule",{value:!0});var u=i._("Extensionless",{comment:"Label for files without extensions like .txt or .png"}),p=i._("Missing dates",{comment:"label for group of files without dates marking when they are created or modified"});t.getSections=d}),define("modules/clean/react/files_view/file_jump",["require","exports","modules/clean/keycode","modules/core/dom"],function(e,t,i,o){"use strict";function n(e,t,n,l){var s=null!=e.which?e.which:e.keyCode,c=String.fromCharCode(s);s<i.KeyCode.SPACE||r.includes(c)||o.focus_in_input()||e.metaKey||e.altKey||e.altGraphKey||e.ctrlKey||s===i.KeyCode.SPACE&&!t()||(s===i.KeyCode.SPACE&&t()&&e.preventDefault(),n(c),null!=a&&clearTimeout(a),a=setTimeout(function(){l()},1e3))}Object.defineProperty(t,"__esModule",{value:!0});var r=["/","\\",":","?","*","<",">","|"],a=null;t.handleKeyPress=n}),define("modules/clean/react/files_view/file_list_empty_folder_table",["require","exports","tslib","external/react","external/spectrum/media_table","external/spectrum/table"],function(e,t,i,o,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.props.onTTI&&this.props.onTTI()},t.prototype._renderTitle=function(){return o.createElement("h3",{className:"u-font-strong empty-folder-table-title"},this.props.title)},t.prototype._renderSubtitle=function(){var e=this.props,t=e.subtitle,i=e.subtitleLink,n=e.subtitleOnClick;return t&&i?o.createElement("a",{className:"empty-folder-table-subtitle empty-folder-table-link",href:i,onClick:n},t):t?o.createElement("span",{className:"empty-folder-table-subtitle"},t):void 0},t.prototype.render=function(){for(var e=[],t=0;t<this.props.numRowsAbove;t++)e.push(o.createElement(n.MediaRow,{key:-t-1}));for(var i=[],a=Math.max(this.props.totalRows-this.props.numRowsAbove-1,0),t=0;t<a;t++)i.push(o.createElement(n.MediaRow,{key:t+1}));return o.createElement(r.Table,{className:"empty-folder-table"},o.createElement(r.TableHead,null),o.createElement(r.TableBody,null,e,o.createElement(n.MediaRow,{key:0},o.createElement(n.MediaCell,{className:"empty-folder-table-cell",title:this._renderTitle(),subtitle:this._renderSubtitle()})),i))},t.defaultProps={numRowsAbove:2,totalRows:14},t})(o.PureComponent);t.EmptyFolderTable=a}),define("modules/clean/react/files_view/file_list_utils",["require","exports","modules/clean/filetypes","modules/clean/react/files_view/types","modules/clean/react/browse/models","modules/clean/sharing/browse_exports"],function(e,t,i,o,n,r){"use strict";function a(e){var t=e.file,r=e.isSelected,a=e.dropTargetHighlightMode;if(a===o.DropTargetHighlightMode.NONE)return!1;if(!t.is_dir)return!1;if(n.File.isReadOnlySharedFolder(t))return!1;if(t.isDeleted)return!1;switch(a){case o.DropTargetHighlightMode.ALL_FOLDERS:return!0;case o.DropTargetHighlightMode.NONSELECTED_FOLDERS:return!r;case o.DropTargetHighlightMode.NONSELECTED_NONSHARED_FOLDERS:return!r&&t.type!==i.FileTypes.SHARED_FOLDER;case o.DropTargetHighlightMode.NONSELECTED_NONSHARED_NONTEAM_FOLDERS:return!r&&![i.FileTypes.SHARED_FOLDER,i.FileTypes.TEAM_SHARED_FOLDER].includes(t.type)}return!1}function l(e){var t=e.context,o=e.file;e.user;return o.isDeleted||o.is_dir&&r.shouldUsePublicFolderSharing(t.config,o.fq_path)||n.File.isTeamMemberFolder(o)||!n.File.canViewFileMembers(o,t)||o.type===i.FileTypes.SANDBOX}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldFileBeHighlightedDropTarget=a,t.isSharingDisabledForFile=l}),define("modules/clean/react/files_view/keyboard_shortcuts",["require","exports","external/keymaster","external/react-dom","modules/clean/keycode","modules/clean/undo","modules/core/browser","modules/core/i18n","modules/core/notify","modules/clean/react/files_view/file_jump","modules/clean/react/no-jquery"],function(e,t,i,o,n,r,a,l,s,c,d){"use strict";function u(e){i.clearScope(e),i.setScope(S)}function p(e,t){return function(i){e(i)&&(i.preventDefault(),"function"==typeof t&&t(i))}}function h(e){return function(t){return!document.activeElement||document.activeElement===document.body||o.findDOMNode(e).contains(t.target)}}function m(e){var t=e.scope,i=e.onSetDragCopyMode,o=function(e,t){return function(i){i.keyCode!==n.KeyCode.CONTROL&&i.keyCode!==n.KeyCode.ALT||t(e)}};b.add(t,"keydown",o(!0,i)),b.add(t,"keyup",o(!1,i))}function f(e){u(e),b.remove(e,"keydown"),b.remove(e,"keyup")}function _(e){var t=e.getIsGlobalEvent,o=e.getIsItemEvent,n=e.getSelectedFiles,c=e.isFilesViewList,d=e.isCurrentPathWriteable,u=e.selectAllAction,h=e.deselectAllAction,f=e.onCopyToClipboard,_=e.onDelete,g=e.onPasteFromClipboard,E=e.onSetDragCopyMode,T=e.onShowRename,b=e.onShowHelpMenu,v=e.scope;m({scope:v,onSetDragCopyMode:E}),S=i.getScope(),S!==v&&i.setScope(v);var I=function(){var e=n(),t=e.some(function(e){return e.read_only});if(1===e.size)if(d()&&!t){var i=e.first();i.isDeleted?s.Notify.error(l._("Deleted files can’t be renamed.")):T(i)}else s.Notify.warning(l._("You don’t have permission to rename files in this folder."))},w=function(){var e=n();e.size&&_(e.toArray())},L=function(){r.performUndo()},N=function(){return document.getElementsByClassName("search-bar__text-input")[0].focus()};i("f2",v,p(o,I)),i("/",v,p(t,N)),i("shift+/",v,p(t,function(){return b(!!c)})),i("escape",v,p(t,h)),a.mac?(i("command+a",v,p(t,u)),i("command+c",v,p(o,f)),i("backspace",v,p(o,w)),i("command+v",v,p(t,g)),i("command+z",v,p(t,L))):(i("ctrl+a",v,p(t,u)),i("ctrl+c",v,p(o,f)),i("delete",v,p(o,w)),i("ctrl+v",v,p(t,g)),i("ctrl+z",v,p(t,L)))}function g(e){var t=e.getIsGlobalEvent,o=e.getIsItemEvent,n=e.getSelectedFiles,r=e.isCurrentPathWriteable,a=e.enableContextMenu,l=e.selectAllAction,s=e.deselectAllAction,c=e.onCopyToClipboard,u=e.onDelete,h=e.onNavigateToFileOrFolder,m=e.onNavigateToParentFolder,f=e.onPasteFromClipboard,g=e.onSetDragCopyMode,E=e.onShowRename,T=e.onShowHelpMenu,S=e.openContextMenuAtPosition,b=e.scope;_({getIsGlobalEvent:t,getIsItemEvent:o,getSelectedFiles:n,isFilesViewList:!0,isCurrentPathWriteable:r,selectAllAction:l,deselectAllAction:s,onCopyToClipboard:c,onDelete:u,onPasteFromClipboard:f,onSetDragCopyMode:g,onShowRename:E,onShowHelpMenu:T,scope:b});var v=function(){var e=n();1===e.size&&h(e.first())},I=function(){var e=n(),t=e.first();1===e.size&&t.is_dir&&h(t)},w=function(e){if("function"==typeof S&&n().size){var t=d.closestElement(e.target,".browse-file-row--is-selected");if(t){S(t.offsetLeft+200,t.offsetTop+5,t)}}else S(10,10)};i("enter",b,p(o,v)),i("right",b,p(o,I)),i("left",b,p(t,m)),a()&&i("alt+a",b,p(t,w))}function E(e){var t=e.scope,o=e.getIsFileJumping,n=e.onAddFileJumpKeyCode,r=e.onResetFileJump,a=function(e){i.getScope()===t&&c.handleKeyPress(e,o,n,r)};b.add(t,"keypress",a)}function T(e){b.remove(e,"keypress")}Object.defineProperty(t,"__esModule",{value:!0}),t.FILES_VIEW_SHORTCUTS=[{windowsKey:"Enter",macKey:"return",desc:l._("Open file or folder")},{key:"/",desc:l._("Search")},{windowsKey:"Ctrl + a",macKey:"⌘ + a",desc:l._("Select all files")},{windowsKey:"Esc",macKey:"esc",desc:l._("Deselect all files")},{windowsKey:"Ctrl + c",macKey:"⌘ + c",desc:l._("Copy selected file(s)")},{windowsKey:"Ctrl + v",macKey:"⌘ + v",desc:l._("Paste selected file(s) into the current folder")},{key:"F2",desc:l._("Rename selected file")},{windowsKey:"Delete",macKey:"delete",desc:l._("Delete selected file(s)")},{windowsKey:"Ctrl + z",macKey:"⌘ + z",desc:l._("Undo recent move/copy/rename/delete")},{key:"?",desc:l._("Show keyboard shortcuts")}],t.FILES_VIEW_LIST_SHORTCUTS=[{key:"↑",desc:l._("Select previous file (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:"↓",desc:l._("Select next file (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:"←",desc:l._("Go up a folder")},{key:"→",desc:l._("Open folder")}].concat(t.FILES_VIEW_SHORTCUTS),t.FILES_VIEW_TILE_GRID_SHORTCUTS=[{key:"↑",desc:l._("Select file in previous row (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:"↓",desc:l._("Select file in next row (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:"←",desc:l._("Select previous file (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:"→",desc:l._("Select next file (hold shift to select range)",{comment:"Shift refers to the shift key"})}].concat(t.FILES_VIEW_SHORTCUTS);var S="",b=new d.ScopedEventHandlers(document);t.generateGetIsGlobalEvent=h,t.resetFilesViewKeyboardShortcuts=f,t.setupFilesViewKeyboardShortcuts=_,t.setupFilesViewListKeyboardShortcuts=g,t.setupFileJumpKeyboardShortcuts=E,t.resetFileJumpKeyboardShortcuts=T}),define("modules/clean/react/files_view/name_input",["require","exports","tslib","external/classnames","external/react","modules/clean/keycode","modules/clean/react/files_view/types"],function(e,t,i,o,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=function(){},s=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setInputRef=function(e){t.inputRef=e},t.handleDragStart=function(e){e.stopPropagation()},t.handleSubmit=function(e){e.preventDefault(),t.submitIfChanged(a.NameInputActionSource.SUBMIT)},t.handleKeyDown=function(e){e.keyCode===r.KeyCode.ESC?(e.preventDefault(),t.props.onCancel({source:a.NameInputActionSource.ESC})):e.keyCode===r.KeyCode.ENTER&&t.handleSubmit(e)},t.handleBlur=function(e){t.submitIfChanged(a.NameInputActionSource.BLUR)},t.handleClick=function(e){e.preventDefault(),t.props.onClick(e)},t}return i.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;this.inputRef.focus(),window.requestAnimationFrame(function(){var t=e.inputRef.value,i=e.props.isDir?t.length:t.lastIndexOf(".");i<0&&(i=t.length),e.inputRef.setSelectionRange(0,i)})},t.prototype.submitIfChanged=function(e){var t=this.inputRef.value.trim();t===this.props.defaultValue?this.props.onCancel({source:e}):this.props.onSubmit(t)},t.prototype.render=function(){return n.createElement("form",{className:"u-pad-right-xs",onSubmit:this.handleSubmit},n.createElement("input",{ref:this.setInputRef,defaultValue:this.props.defaultValue,className:o("c-input",this.props.className),onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onDragStart:this.handleDragStart,"aria-label":this.props.label,onClick:this.handleClick}))},t.defaultProps={className:"",onCancel:l,onClick:l,onSubmit:l,idDir:null},t})(n.PureComponent);t.NameInput=s}),define("modules/clean/react/files_view/overflow_menu",["require","exports","tslib","external/react","external/spectrum/overflow_button","external/spectrum/popover","modules/core/i18n","external/lodash"],function(e,t,i,o,n,r,a,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s;(function(e){e[e.Normal=0]="Normal",e[e.Small=1]="Small"})(s=t.OverflowMenuSize||(t.OverflowMenuSize={}));var c=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.preventDefaultAndStopPropagation=function(e){e.preventDefault(),e.stopPropagation()},t.handleSelection=function(e){e.performAction()},t}return i.__extends(t,e),t.prototype.renderOverflowButton=function(){return o.createElement(n.OverflowButton,{"aria-label":a._("More actions"),className:"browse-overflow-menu-trigger-button",tagName:"span",size:this.props.size===s.Small?"small":"default",variant:this.props.showBorders?"secondary":"borderless"})},t.prototype._getMenuItems=function(){var e=this.props.actionItemsGroups;return l.reduce(e,function(e,t,i){var n=t.map(function(e){return o.createElement(r.PopoverContentItem,{className:e.className,key:e.label,value:e,disabled:e.disabled},e.label)});return i?e.concat([o.createElement(r.PopoverItemGroupSeparator,{key:i})],n):n.slice()},[])},t.prototype.render=function(){var e=this.props.attachment,t=this._getMenuItems();return o.createElement("div",{className:"browse-overflow-menu",onClick:this.preventDefaultAndStopPropagation,onDoubleClick:this.preventDefaultAndStopPropagation},o.createElement(r.Popover,{onSelection:this.handleSelection,closeOnSelection:!0},o.createElement(r.PopoverTrigger,{className:"browse-overflow-menu-trigger"},this.renderOverflowButton()),o.createElement(r.PopoverContent,{attachment:e,className:"browse-overflow-menu-content"},t)))},t.defaultProps={attachment:"right"},t})(o.PureComponent);t.FilesViewOverflowMenu=c}),define("modules/clean/react/files_view/star",["require","exports","external/react"],function(e,t,i){"use strict";function o(t){var o=t.fileId,n=t.user,r=t.className,a=t.onStarClick,l=t.isReadOnly,s=t.isTabbing,c=e("modules/clean/react/starred/browse_exports"),d=c.Star,u=c.HOME_RESOURCE_ID_TYPE,p=c.StarredSource;return i.createElement("div",{className:r},i.createElement(d,{id:o,key:"star",idType:u.ENCODED_FILE_OBJ_ID,user:n,onStarClick:a,source:p.BROWSE,isReadOnly:l,isTabbing:s}))}Object.defineProperty(t,"__esModule",{value:!0}),t.StarContainer=o}),define("modules/clean/react/files_view/tile_grid",["require","exports","tslib","external/classnames","external/immutable","external/react","external/spectrum/button","modules/clean/em_string","modules/clean/filepath","modules/clean/react/files_view/file_grouper","modules/clean/react/files_view/keyboard_shortcuts","modules/clean/react/browse/models","modules/clean/react/files_view/overflow_menu","modules/clean/react/files_view/tile_label_input","modules/clean/react/files_view/types","modules/clean/react/files_view/constants","modules/clean/react/files_view/drag_and_drop","modules/clean/react/files_view/util","modules/clean/react/files_view/star","modules/clean/react/maestro/tile_grid","modules/clean/react/title_bubble","modules/core/i18n","modules/core/uri","modules/clean/browse_interface"],function(e,t,i,o,n,r,a,l,s,c,d,u,p,h,m,f,_,g,E,T,S,b,v,I){"use strict";function w(e){var t;return e.thumbnail_url_tmpl&&(t=v.URI.parse(e.thumbnail_url_tmpl),t=t.removeQuery("size").removeQuery("size_mode"),t=t.updateQuery({size:"256x256",size_mode:"2"}).toString()),t}Object.defineProperty(t,"__esModule",{value:!0}),t.getThumbnailUrlForItem=w;var L=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onStarClickCallback=function(e){var i=t.props,o=i.onStarClick,n=i.item,r=n;o&&o(r,e)},t}return i.__extends(t,e),t.prototype.render=function(){var e,t=this.props,i=t.fileRename,o=t.arePostTTIModulesLoaded,n=t.user,a=t.item,c=t.inSelectMode,d=t.createRenameCancelHandler,p=t.createRenameSubmitHandler,f=a instanceof u.File,_=a,g=a;if(e=f?s.filename(_.fq_path):g.title,f&&i&&s.paths_are_equal(i.file.fq_path,_.fq_path)){if(i.state===m.RenameState.PENDING_INPUT)return r.createElement(h.TileLabelInput,{defaultValue:e,label:e,onCancel:d(_),onSubmit:p(_)});if(i.state===m.RenameState.SAVING_INPUT)return r.createElement(T.TileItemLabelText,{className:"tile-label__text--saving",label:b._("Renaming…")})}var v=l.Emstring.em_snippet(e,14,.5),I=o&&!c&&!u.File.isNoAccessSharedFolder(_),w=r.createElement(T.TileItemLabelText,{key:"label",label:v});e!==v&&(w=r.createElement(S.TitleBubble,{content:e,position:S.TitleBubble.POSITIONS.BOTTOM,className:"tile-label__title-bubble",key:"tooltip"},w));var L=r.createElement(E.StarContainer,{fileId:_.file_id,user:n,className:"tile-star",key:"tileStar",onStarClick:this.onStarClickCallback});return r.createElement("span",null,[w,I&&!i&&L])},t})(r.PureComponent);t.TileLabel=L;var N=(function(t){function l(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={inSelectMode:!1,sectionLabels:n.List(),sectionStartIndices:n.List(),selectedIds:n.Set(),totalNumItems:0},e.handleFileViewerUnmount=function(){e.tileGrid&&e.tileGrid.getAndUpdateTileLayout();var t=e.props.selectedFiles.first();t&&e.props.onFocusFile(t.fq_path)},e.createRenameCancelHandler=function(t){return function(){e.props.onRenameCancel(t)}},e.createRenameSubmitHandler=function(t){return function(i){e.props.onRenameSubmit(t,i)}},e.setTileGridRef=function(t){e.tileGrid=t},e.getTileItem=function(t,o){var n,l=e.props,c=l.activeDropTarget,d=l.isCreateFolderUIActive,p=l.isPhotosPage,h=l.items,m=l.selection,f=l.user,_=e.state.inSelectMode;if(d){if(0===t)return e.getCreateFolderTile();t-=1}var g=h.get(t);if(!g){var E="Placeholder "+t;return{altText:E,id:E,isViewOnly:!0,isDraggable:!1,isSelectable:!1}}var T=g instanceof u.File,S=g,v=g,L=e.createViewFileHandler(S),N=e.createToggleSelectHandler(S),y=L,C=!1,O=!1;T&&(n=e.renderTileOverflowMenu(S,o)),_&&T&&(C=m.selected.last()===S.fq_path,O=m.selected.has(S.fq_path),y=N,T&&(n=r.createElement(a.Button,{className:"tile__action-button--view-file",variant:"secondary",size:"small","aria-label":b._("View File"),onClick:L})));var A=p?void 0:e.renderLabelElement(g),F=T?s.filename(S.fq_path):v.title,D=T?w(S):void 0,R=g===c,P=T?I.href_for_file(f,S):void 0,M={file:S,paper:g instanceof u.Paper?v:void 0,id:T?S.sjid.toString():v.pad_id,labelNode:A,altText:F,thumbnailUrl:D,actionNode:n,onTileAction:y,isDraggable:!1,isFocused:C,isSelectable:T,handleToggleSelect:N,checkboxAriaText:b._("Select tile"),href:P};return p||(M=i.__assign({},M,{isDraggable:!0,onDragEnter:e.createDragEnterHandler(S,O,R),onDragStart:e.createDragStartHandler(S,O,N)})),M},e}return i.__extends(l,t),l.prototype.componentWillMount=function(){this.setState({inSelectMode:this.props.selectedFiles.count()>0}),this.setTotalNumItems(this.props),this.setTileItemsSections(this.props),this.setSelectedTiles(this.props)},l.prototype.componentDidMount=function(){this.setupExternalDragHandler(),this.setupKeyboardShortcuts()},l.prototype.componentWillUnmount=function(){this.props.isPhotosPage||d.resetFileJumpKeyboardShortcuts(f.TILE_GRID_SCOPE),d.resetFilesViewKeyboardShortcuts(f.TILE_GRID_SCOPE),_.cleanupExternalDragHandler(f.TILE_GRID_SCOPE)},l.prototype.componentWillReceiveProps=function(e){e.items===this.props.items&&e.createNewFolderState===this.props.createNewFolderState||this.setTotalNumItems(e),e.selectedFiles!==this.props.selectedFiles&&(this.setSelectedTiles(e),this.setState({inSelectMode:e.selectedFiles.count()>0})),e.activeSortField===this.props.activeSortField&&e.activeSortDirection===this.props.activeSortDirection&&e.sections===this.props.sections&&e.items===this.props.items||this.setTileItemsSections(e)},l.prototype.componentDidUpdate=function(e){(e.createNewFolderState===m.NewFolderCreationState.PENDING_INPUT&&this.props.createNewFolderState===m.NewFolderCreationState.SAVING_INPUT||e.fileRename!==this.props.fileRename||e.items!==this.props.items)&&this.tileGrid.forceUpdate()},l.prototype.setTotalNumItems=function(e){var t=Math.max(e.items.size,e.totalNumItems);e.isCreateFolderUIActive&&(t+=1),this.setState({totalNumItems:t})},l.prototype.setTileItemsSections=function(e){var t;t=e.sections?e.sections:e.activeSortField?c.getSections(e.items,e.activeSortField,e.activeSortDirection):{sectionLabels:[],sectionStartIndices:[]},this.setState({sectionLabels:n.List(t.sectionLabels),sectionStartIndices:n.List(t.sectionStartIndices)})},l.prototype.createToggleSelectHandler=function(e){var t=this,i=e.fq_path;return function(e){e.preventDefault(),e.stopPropagation();var o=t.props.selection;o=o.selected.has(i)?o.update("selected",function(e){return e.delete(i)}):o.update("selected",function(e){return e.add(i)}).set("anchor",i),t.props.onSelectionChange(o)}},l.prototype.renderTileOverflowMenu=function(t,i){var o=this.props,n=o.getOverflowMenuActions,a=o.arePostTTIModulesLoaded,l=0===i?"left":"right";if(a){var s=e("modules/clean/react/files_view/overflow_menu_with_star").OverflowMenuWithStar;return r.createElement(s,{file:t,getOverflowMenuActions:n,attachment:l,size:p.OverflowMenuSize.Small,showBorders:!0})}return null},l.prototype.renderLabelElement=function(e){var t=this.state.inSelectMode,o=this.props,n=o.user,a=o.fileRename,l=o.arePostTTIModulesLoaded,s=o.onStarClick,c={user:n,fileRename:a,arePostTTIModulesLoaded:l,onStarClick:s};return r.createElement(L,i.__assign({},c,{item:e,inSelectMode:t,createRenameCancelHandler:this.createRenameCancelHandler,createRenameSubmitHandler:this.createRenameSubmitHandler}))},l.prototype.createViewFileHandler=function(e){var t=this;return function(i){if(e instanceof u.File){if("click"===i.type&&!g.shouldHandleClick(i))return;i.preventDefault(),i.stopPropagation(),t.props.onNavigateToFileOrFolder(e,t.handleFileViewerUnmount)}else e instanceof u.Paper&&t.props.onOpenPaper(i,e)}},l.prototype.setSelectedTiles=function(e){var t=n.Set().withMutations(function(t){e.selectedFiles.forEach(function(e){t.add(e.sjid.toString())})});this.setState({selectedIds:t})},l.prototype.setupExternalDragHandler=function(){var e=this,t=function(){return!!e.props.isDraggingInternalFiles},i=function(){return!!e.props.isDraggingExternalFiles},o=function(){return e.props.activeDropTarget};_.setupExternalDragHandler(f.TILE_GRID_SCOPE,t,i,this.props.onSetFileUploaderPath,".tile",o,this.props.onSetDropTarget)},l.prototype.setupKeyboardShortcuts=function(){var e=this,t=this.props,i=t.onDelete,o=t.onShowRename,n=t.deselectAll,r=t.getIsCurrentPathWriteable,a=t.getIsFileJumping,l=t.onAddFileJumpKeyCode,s=t.onResetFileJump,c=t.onCopyToClipboard,u=t.onPasteFromClipboard,p=t.onSetDragCopyMode,h=t.selectAll,m=d.generateGetIsGlobalEvent(this),_=m,g=function(){return e.props.selectedFiles};this.props.isPhotosPage||d.setupFileJumpKeyboardShortcuts({scope:f.TILE_GRID_SCOPE,getIsFileJumping:a,onAddFileJumpKeyCode:l,onResetFileJump:s}),d.setupFilesViewKeyboardShortcuts({getIsGlobalEvent:m,getIsItemEvent:_,getSelectedFiles:g,isFilesViewList:!1,isCurrentPathWriteable:r,selectAllAction:h,deselectAllAction:n,onCopyToClipboard:c,onDelete:i,onPasteFromClipboard:u,onSetDragCopyMode:p,onShowRename:o,scope:f.TILE_GRID_SCOPE,onShowHelpMenu:function(){return e.props.onOpenKeyboardShortcutModal()}})},l.prototype.createDragEnterHandler=function(e,t,i){var o=this;return function(n){o.props.onDragEnter(n,e,t,i)}},l.prototype.createDragStartHandler=function(e,t,i){var o=this;return function(n){t?o.props.onDragStart(n):(i(n),o.props.onDragStart(n,[e]))}},l.prototype.getCreateFolderTile=function(){var e=this.props,t=e.createNewFolderState,i=e.onNewFolderCancel,o=e.onNewFolderSubmit,n=b._("New folder"),a=r.createElement("div",null);return t===m.NewFolderCreationState.PENDING_INPUT?(n=b._("Folder name"),a=r.createElement(h.TileLabelInput,{label:n,onCancel:i,onSubmit:o})):t===m.NewFolderCreationState.SAVING_INPUT&&(n=b._("Creating new folder…"),a=r.createElement(T.TileItemLabelText,{className:"tile-label__text--saving",label:n})),{altText:n,id:"New folder tile",isDraggable:!1,isSelectable:!1,labelNode:a}},l.prototype.getTileGridRef=function(){return this.tileGrid},l.prototype.render=function(){var e=this.props.enableMaxHeightGrouping,t=o({"file-tile-grid-container":!0,"file-tile-grid-container--show-checkboxes":this.state.inSelectMode});return r.createElement("div",null,r.createElement(T.InfiniteTileGrid,{key:"tileGrid",ref:this.setTileGridRef,totalNumItems:this.state.totalNumItems,containerClass:t,rowClass:"file-tile-row",enableMaxHeightGrouping:e,delayRenderFullTile:!this.props.isCreateFolderUIActive,logTileLoading:!0,numThresholdRows:f.FilesViewTileGridConstants.NUM_THRESHOLD_ROWS,scrollDeltaThreshold:f.FilesViewTileGridConstants.SCROLL_DELTA_THRESHOLD,
sectionStartIndices:this.state.sectionStartIndices,sectionLabels:this.state.sectionLabels,showLabels:!this.props.isPhotosPage,contentOffset:136,getTileItem:this.getTileItem,selectedIds:this.state.selectedIds,handleTTI:this.props.onTTI,thumbStore:this.props.thumbStore,onRangeInView:this.props.onRangeInView,tilesPerRow:this.props.tilesPerRow,onTilesPerRowChange:this.props.onTilesPerRowChange,dropTargetHighlightMode:this.props.dropTargetHighlightMode,activeDropTarget:this.props.activeDropTarget}))},l.defaultProps={enableMaxHeightGrouping:!1},l})(r.PureComponent);t.FilesViewTileGrid=N}),define("modules/clean/react/files_view/tile_label_input",["require","exports","external/classnames","external/react","modules/clean/react/files_view/name_input"],function(e,t,i,o,n){"use strict";function r(e){var t=i("tile-label-input",e.className),r=e.defaultValue||"",a=function(e){e.stopPropagation(),e.preventDefault()};return o.createElement(n.NameInput,{className:t,defaultValue:r,label:e.label,onCancel:e.onCancel,onClick:a,onSubmit:e.onSubmit})}Object.defineProperty(t,"__esModule",{value:!0}),t.TileLabelInput=r}),define("modules/clean/react/files_view/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){e.ESC="ESC",e.SUBMIT="SUBMIT",e.BLUR="BLUR"})(t.NameInputActionSource||(t.NameInputActionSource={}));(function(e){e.CREATE_FOLDER_INACTIVE="CREATE_FOLDER_INACTIVE",e.PENDING_INPUT="PENDING_INPUT",e.SAVING_INPUT="SAVING_INPUT"})(t.NewFolderCreationState||(t.NewFolderCreationState={}));(function(e){e.PENDING_INPUT="pending-input",e.SAVING_INPUT="saving-input"})(t.RenameState||(t.RenameState={}));(function(e){e.LOADED="LOADED",e.LOADING_FIRST_PAGE="LOADING_FIRST_PAGE",e.LOADING_REMAINING_PAGES="LOADING_REMAINING_PAGES"})(t.LoadingState||(t.LoadingState={}));(function(e){e.FILENAME="FILENAME",e.MODIFIED="MODIFIED",e.CATEGORY="CATEGORY",e.EXTENSION="EXTENSION",e.SIZE="SIZE",e.SHARED_WITH="SHARED_WITH",e.SYNC_SETTING="SYNC_SETTING"})(t.SortField||(t.SortField={}));(function(e){e.FILENAME="FILES_BY_NAME",e.MODIFIED="FILES_BY_MODIFIED",e.CATEGORY="FILES_BY_CATEGORY",e.EXTENSION="FILES_BY_NAME",e.SIZE="FILES_BY_SIZE",e.SHARED_WITH="FILES_BY_NAME",e.SYNC_SETTING="FILES_BY_SYNC_SETTING"})(t.SortLabel||(t.SortLabel={}));(function(e){e.ASCENDING="ASCENDING",e.DESCENDING="DESCENDING"})(t.SortDirection||(t.SortDirection={}));(function(e){e.Grid="GRID_VIEW",e.List="LIST_VIEW"})(t.ViewType||(t.ViewType={}));(function(e){e.LOADING="LOADING",e.COMPLETE="COMPLETE",e.NO_ACCESS="NO_ACCESS",e.ERROR="ERROR"})(t.FetchFolderSizeState||(t.FetchFolderSizeState={}));(function(e){e.NONE="NONE",e.ALL_FOLDERS="ALL_FOLDERS",e.NONSELECTED_FOLDERS="NONSELECTED_FOLDERS",e.NONSELECTED_NONSHARED_FOLDERS="NONSELECTED_NONSHARED_FOLDERS",e.NONSELECTED_NONSHARED_NONTEAM_FOLDERS="NONSELECTED_NONSHARED_NONTEAM_FOLDERS"})(t.DropTargetHighlightMode||(t.DropTargetHighlightMode={}))}),define("modules/clean/react/files_view/util",["require","exports"],function(e,t){"use strict";function i(e){return 0===e.button&&!e.altKey&&!e.ctrlKey&&!e.metaKey}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldHandleClick=i}),define("modules/clean/react/home/home_access/home_access_util",["require","exports","modules/constants/starred"],function(e,t,i){"use strict";function o(){return i.HOME_ENABLED}Object.defineProperty(t,"__esModule",{value:!0}),t.isHomeEnabled=o}),define("modules/clean/react/maestro/checkbox",["require","exports","tslib","external/react","external/classnames"],function(e,t,i,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r;(function(e){e[e.Checked=0]="Checked",e[e.PartiallyChecked=1]="PartiallyChecked",e[e.Unchecked=2]="Unchecked"})(r||(r={})),t.CheckboxState=r;var a=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.render=function(){var e=this.props.checkboxState,t=n({"checkbox-button":!0,"partial-checked":e===r.PartiallyChecked,checked:e===r.Checked});return o.createElement("button",{role:"checkbox","aria-checked":e===r.Checked,"aria-label":this.props.ariaLabel,className:t,onClick:this.props.onClick,onMouseDown:this.props.onMouseDown})},t})(o.PureComponent);t.Checkbox=a}),define("modules/clean/react/maestro/tile_element",["require","exports","tslib","external/classnames","external/react","modules/clean/search/paper_formatting_utils","modules/clean/keycode","modules/clean/react/maestro/checkbox","modules/clean/react/maestro/tile_grid_logger","modules/clean/react/icon/file_folder_icon","modules/clean/user_education/react/user_education_effect"],function(e,t,i,o,n,r,a,l,s,c,d){"use strict";function u(e){var t=e.leftOffset,i=e.tileHeight,o=e.tileWidth,r=e.thumbNode,a=e.labelNode,l={left:t,height:i,width:o,pointerEvents:"none"},s={height:o,width:o};return n.createElement("div",{className:"tile",style:l},n.createElement("div",{className:"tile__thumb-container",style:s},r||n.createElement("div",{className:"tile__preview--placeholder"})),a)}Object.defineProperty(t,"__esModule",{value:!0});var p=function(){return null};t.TilePlaceholder=u;var h=(function(e){function t(o){var n=e.call(this,o)||this;return n.animationRequestIds=[],n.handleThumbnailError=function(){var e=n.props,t=e.onThumbnailError,i=e.tileIndex;n.setState({thumbLoaded:!1}),t&&t(i)},n.focusTile=function(){if(!n.state.isFocused){var e=n.refs.tileThumbContainer;e&&e.focus()}},n.logTileInteractive=function(){var e=!!n.props.thumbnailUrl,t=n.state.thumbLoaded;if(n.props.onThumbnailLoad){var i=window.requestAnimationFrame(function(){var i=window.requestAnimationFrame(function(){n.props.onThumbnailLoad(n.props.tileIndex,e,t)});n.animationRequestIds.push(i)});n.animationRequestIds.push(i)}},n.toggleSelect=function(e){e.preventDefault(),e.stopPropagation(),n.props.handleToggleSelect(e)},n.handleThumbKeyPress=function(e){var t=e.keyCode;t!==a.KeyCode.SPACE&&t!==a.KeyCode.ENTER||(e.preventDefault(),n.props.onTileAction(e))},n.onBlur=function(e){n.setState({isFocused:!1})},n.onFocus=function(e){n.setState({isFocused:!0})},n.state=i.__assign({thumbLoaded:t.isThumbLoaded(o)},n.calcPaperTitleState(o)),n}return i.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;this.props.delayRenderFullTile?this.renderCompleteTileTimeout=setTimeout(function(){e.renderCompleteTileTimeout=0,e.fetchThumbnail()},100):this.fetchThumbnail(),this.logTileInteractive()},t.prototype.componentDidUpdate=function(e,t){!e.isFocused&&this.props.isFocused&&this.focusTile()},t.prototype.componentWillReceiveProps=function(e){if(e.thumbnailUrl!==this.props.thumbnailUrl&&(this.unbindThumbnailIfNeeded(),this.setState({thumbLoaded:t.isThumbLoaded(e)}),this.fetchThumbnail()),t.getPaperTitle(this.props)!==t.getPaperTitle(e)){var i=this.calcPaperTitleState(e);this.setState(i)}},t.getPaperTitle=function(e){return e.paper?e.paper.title:null},t.prototype.calcPaperTitleState=function(e){return e.paper?{paperTitleParts:r.getPaperDocTitleParts(e.paper,"brws-file-name-grid-icon","brws-file-name-grid-icon-emoji",!0)}:{}},t.prototype.componentWillUnmount=function(){this.unbindThumbnailIfNeeded(),this.renderCompleteTileTimeout&&clearTimeout(this.renderCompleteTileTimeout),this.animationRequestIds.forEach(function(e){window.cancelAnimationFrame(e)}),this.animationRequestIds=[]},t.prototype.fetchThumbnail=function(){var e=this,t=this.props,i=t.thumbnailUrl,o=t.thumbStore;if(i){var n=Date.now();this.thumbRequestId=o.bind_url(i,{onSuccess:function(){e.setState({thumbLoaded:!0}),s.InfiniteTileGridLogger.logThumbRTT(Date.now()-n)},onError:function(){e.handleThumbnailError()}})}},t.prototype.unbindThumbnailIfNeeded=function(){var e=this.props.thumbStore;this.state.thumbLoaded&&this.thumbRequestId&&e.unbind_url(this.thumbRequestId),this.setState({thumbLoaded:!1})},t.isThumbLoaded=function(e){var t=e.thumbStore,i=e.thumbnailUrl;return!(!i||!t.get_thumb(i))},t.prototype.renderCheckbox=function(){var e=this.props.isSelected?l.CheckboxState.Checked:l.CheckboxState.Unchecked,t=n.createElement(l.Checkbox,{ariaLabel:this.props.checkboxAriaText,checkboxState:e,onClick:this.toggleSelect});return 0===this.props.tileIndex&&(t=n.createElement(d.UserEducationEffect,{containerName:"FileItemRow",name:"FirstFileSelectCheckbox"},t)),n.createElement("div",{key:"tile-select-checkbox",className:"tile-select-checkbox"},t)},t.prototype.renderActionNode=function(){return n.createElement("div",{key:"tile-action-node",className:"tile__action-button"},this.props.actionNode)},t.prototype.renderThumbnail=function(){var e=this.props,t=e.thumbnailUrl,i=e.thumbStore,o=e.altText,r=e.width;if(this.state.thumbLoaded){var a=i.get_thumb(t);if(a)return n.createElement("img",{alt:o,className:"tile__preview tile__preview--thumb",draggable:!1,src:a,style:{maxHeight:r,maxWidth:r},onError:this.handleThumbnailError})}return this.renderFileIcon()},t.prototype.renderFileIcon=function(){var e=this.props,t=e.file;return e.paper?this.state.paperTitleParts.icon:t?n.createElement(c.FileOrFolderIcon,{className:"tile__preview tile__preview--icon",file:t,variant:"large",showPreview:!1}):n.createElement("div",{className:"tile__preview--placeholder"})},t.prototype.render=function(){var e=null;this.props.labelNode&&(e=n.createElement("div",{className:"tile-label"},this.props.labelNode));var t=this.props.width+this.props.labelHeight;if(this.props.isViewOnly)return n.createElement(u,{leftOffset:this.props.leftOffset,tileHeight:t,tileWidth:this.props.width,thumbNode:this.renderThumbnail(),labelNode:e});var r={left:this.props.leftOffset,height:t,width:this.props.width},a={height:this.props.width,width:this.props.width},l={className:o("tile",{"tile--is-selected":this.props.isSelected,"tile--focused-in":this.state.isFocused,"tile--is-dragover":this.props.isActiveDropTarget,"tile--is-droppable":this.props.isAvailableDropTarget&&!this.props.isActiveDropTarget}),style:r,draggable:this.props.isDraggable,href:this.props.href,onBlur:this.onBlur,onClick:this.props.onTileAction,onDragEnter:this.props.onDragEnter,onDragStart:this.props.onDragStart,onFocus:this.onFocus},s=n.createElement("div",{ref:"tileThumbContainer",className:"tile__thumb-container",style:a,tabIndex:0,onKeyDown:this.handleThumbKeyPress},this.renderThumbnail());return n.createElement("a",i.__assign({},l),s,this.props.isSelectable&&this.renderCheckbox(),this.renderActionNode(),e)},t.defaultProps={checkboxAriaText:"",delayRenderFullTile:!0,handleToggleSelect:p,isFocused:!1,isSelected:!1,isViewOnly:!1,onDragEnter:p,onDragStart:p,onTileAction:p},t})(n.PureComponent);t.TileElement=h}),define("modules/clean/react/maestro/tile_grid",["require","exports","tslib","external/react","external/react-dom","external/classnames","modules/clean/js_client_stopwatch","external/spectrum/culled_list","modules/clean/react/maestro/tile_element","modules/clean/react/maestro/tile_grid_logger","modules/clean/react/files_view/file_list_utils"],function(e,t,i,o,n,r,a,l,s,c,d){"use strict";function u(e){var t=null;return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(!t||t.length!==i.length||!t.every(function(e,t){return e===i[t]}))return t=i,e.apply(void 0,i)}}function p(e){var t=e.className,i=e.label;return t=r("tile-label__text",t),o.createElement("div",{className:t},i)}Object.defineProperty(t,"__esModule",{value:!0});t.memoizeCallback=u,t.TileItemLabelText=p;var h=(function(e){function t(t){var i=e.call(this,t)||this;if(i.ttiReported=!1,i.itemRangeByRow=[],i.scrollTileIntoView=function(e,t){var o=i.props.contentOffset||0,n=document.documentElement.scrollTop||document.body.scrollTop,r=Math.floor(t/i.props.tilesPerRow),a=e-o,l=i.getRowHeight(),s=r*l,c=s+l;n<=s&&c<=a+n||(s<n?window.scrollTo(0,s):window.scrollTo(0,c-a))},i.updateOnResize=function(){window.requestAnimationFrame(function(){i.getAndUpdateTileLayout()})},i.handleTTI=function(){i.ttiReported=!0;var e=i.props.handleTTI;e&&e()},i.setLastViewedPage=function(e){var t=document.documentElement.scrollTop||document.body.scrollTop,o=Math.round(t/e);if(i.tileLoadLogger.pruneTrackedPages(),i.tileLoadLogger.logCompletedPages(),!i.tileLoadLogger.pagesCompletedLogging.has(o)&&!i.tileLoadLogger.pagesToLog.has(o))if(o!==i.tileLoadLogger.lastViewedPage){if(i.tileLoadLogger.lastViewedPage=o,i.tileLoadLogger.pageChangeTime=i.tileLoadLogger.getTimeNow(),!i.tileLoadLogger.startTimeByPage.get(o)){var n=i.tileLoadLogger.getTimeNow(),r=i.tileLoadLogger.startTimeByPage.set(o,n);i.tileLoadLogger.startTimeByPage=r}}else{var n=i.tileLoadLogger.getTimeNow();if(n-i.tileLoadLogger.pageChangeTime>1e3){var a=i.tileLoadLogger.pagesToLog.add(o);i.tileLoadLogger.pagesToLog=a}}},i.logTileError=function(e){i.tileLoadLogger&&i.tileLoadLogger.recordTileError(e),i.props.logTileLoading&&c.InfiniteTileGridLogger.logThumbLoadError()},i.logTileLoaded=function(e,t,o){i.tileLoadLogger&&i.tileLoadLogger.recordTileLoaded(e,t,o)},i.renderTileElement=function(e,t,n){if(e<0||e>i.props.totalNumItems)return null;var r=i.props.getTileItem(e,n);if(!r)return o.createElement(s.TilePlaceholder,{leftOffset:t,tileHeight:i.state.tileWidth,tileWidth:i.state.tileWidth});var a=i.ttiReported&&i.props.delayRenderFullTile,l=r.isSelectable&&!!i.props.selectedIds&&i.props.selectedIds.has(r.id),c=r.file&&d.shouldFileBeHighlightedDropTarget({file:r.file,isSelected:l,dropTargetHighlightMode:i.props.dropTargetHighlightMode}),u=c&&r.file===i.props.activeDropTarget;return o.createElement(s.TileElement,{file:r.file,paper:r.paper,key:r.id,onTileAction:r.onTileAction,width:i.state.tileWidth,leftOffset:t,tileIndex:e,labelHeight:r.labelNode?i.props.labelHeight:0,delayRenderFullTile:a,actionNode:r.actionNode,thumbnailUrl:r.thumbnailUrl,labelNode:r.labelNode,altText:r.altText,onThumbnailError:i.props.logTileLoading?i.logTileError:void 0,onThumbnailLoad:i.props.logTileLoading?i.logTileLoaded:void 0,isDraggable:r.isDraggable,onDragEnter:r.onDragEnter,onDragStart:r.onDragStart,isFocused:r.isFocused,isSelectable:r.isSelectable,isSelected:l,isViewOnly:r.isViewOnly,isActiveDropTarget:u,isAvailableDropTarget:c,handleToggleSelect:r.handleToggleSelect,checkboxAriaText:r.checkboxAriaText,thumbStore:i.props.thumbStore,scrollTileIntoView:i.scrollTileIntoView,href:r.href})},i.renderRow=function(e,t,n){var r=i.rowHeights?i.rowHeights[t]:i.getRowHeight();if(!e)return o.createElement(l.CulledItem,{className:i.props.rowClass,height:r,key:t,tagName:"li",topOffset:n});if(!Array.isArray(e))return o.createElement(l.CulledItem,{className:i.props.rowClass,height:r,key:t,tagName:"li",topOffset:n},e);for(var a=e,s=a[0],c=a[1],d=i.state.tileWidth+i.props.tilePadding,u=[],p=4,h=s;h<c;h++)u.push(i.renderTileElement(h,p,u.length)),p+=d;return o.createElement(l.CulledItem,{className:i.props.rowClass,height:r,key:t,tagName:"li",topOffset:n},u)},i.handleRangeInView=u(function(e,t){var o=i.props.onRangeInView;if(o){var n=i.translateRowRangeToItemRange(e,t);o(n[0],n[1])}}),i.props.sectionLabels||i.props.sectionStartIndices){if(!i.props.sectionLabels||!i.props.sectionStartIndices)throw new Error("Included only one of `sectionLabels` or `sectionStartIndices`.");if(i.props.sectionLabels.count()!==i.props.sectionStartIndices.count())throw new Error("sectionLabels and sectionStartIndices must be of same length.")}return i.state={tileWidth:i.props.maxTileWidth},a.JSStopwatch.create_stopwatch_if_not_exist("infinite_tile_grid_logging"),i}return i.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;window.addEventListener("resize",this.updateOnResize),this.animationFrameRequestId=window.requestAnimationFrame(function(){var t=e.getAndUpdateTileLayout();e.props.logTileLoading&&e.setupTileLogging(e.getRowHeight(),t.tilesPerRow)})},t.prototype.componentWillReceiveProps=function(e){this.tileLoadLogger&&this.tileLoadLogger.updateNumTiles(e.totalNumItems)},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.updateOnResize),this.animationFrameRequestId&&window.cancelAnimationFrame(this.animationFrameRequestId),this.tileLoadLogger&&(clearInterval(this.logTrackingInterval),delete this.tileLoadLogger)},t.prototype.getRowHeight=function(){var e=this.props.tileHeight+this.props.tilePadding;return this.props.showLabels&&(e+=this.props.labelHeight+4),e},t.prototype.getPageHeight=function(){var e=document.documentElement.clientHeight||window.outerHeight,t=this.props.contentOffset||0,i=e-t,o=this.getRowHeight(),n=o*Math.ceil(i/o);return Math.max(n,o)},t.prototype.getAndUpdateTileLayout=function(){var e=this.props.maxTileWidth+this.props.tilePadding,t=n.findDOMNode(this);if(!t||0===t.clientWidth)return{tileWidth:this.state.tileWidth,tilesPerRow:this.props.tilesPerRow};var i=t.clientWidth,o=Math.max(1,Math.floor(i/e)),r=this.props.maxTileWidth;return i%e>1&&(o++,r=i/o-this.props.tilePadding),this.state.tileWidth!==r&&this.setState({tileWidth:r}),this.props.tilesPerRow!==o&&this.props.onTilesPerRowChange(o),{tileWidth:r,tilesPerRow:o}},t.prototype.setupTileLogging=function(e,t){var i=this.getPageHeight(),o=t*Math.ceil(i/e);this.tileLoadLogger=new c.InfiniteTileGridLogger(this.props.totalNumItems,o,t,this.handleTTI);var n=this.tileLoadLogger.pagesToLog.add(0);this.tileLoadLogger.pagesToLog=n;var r=this.tileLoadLogger.getTimeNow(),a=this.tileLoadLogger.startTimeByPage.set(0,r);this.tileLoadLogger.startTimeByPage=a,this.logTrackingInterval=setInterval(this.setLastViewedPage,200,i)},t.prototype.translateRowRangeToItemRange=function(e,t){var i=this.itemRangeByRow;return[i[e][0],i[t][1]]},t.prototype.render=function(){var e=this,t=this.itemRangeByRow;t.length=0;var i=[],n=this.getRowHeight(),r=this.props,a=r.containerClass,s=r.enableMaxHeightGrouping,c=r.numThresholdRows,d=r.scrollDeltaThreshold,u=r.sectionStartIndices,p=r.sectionLabels,h=r.totalNumItems;if(u&&u.count()>0)return this.rowHeights=[],u.forEach(function(r,a){var l=h;a!==u.count()-1&&(l=u.get(a+1)),e.rowHeights.push(32);var s=l-r,c=Math.ceil(s/e.props.tilesPerRow),d=p.get(a),m=o.createElement("div",{className:"tile-section-header"},d);i.push(m),t.push([r,r]);for(var f=0;f<c;f++){var _=r+f*e.props.tilesPerRow,g=Math.min(_+e.props.tilesPerRow,l),E=[_,g];i.push(E),t.push(E),e.rowHeights.push(n)}}),o.createElement(l.CulledList,{enableMaxHeightGrouping:s,items:i,listItemHeight:this.rowHeights,itemBuffer:c,className:a,renderRow:this.renderRow,scrollThreshold:d,shouldUseWindowAsScrollContainer:!0,onRangeInView:this.handleRangeInView});for(var m=Math.ceil(h/this.props.tilesPerRow),f=0;f<m;f++){var _=f*this.props.tilesPerRow,g=Math.min(_+this.props.tilesPerRow,h),E=[_,g];i.push(E),t.push(E)}return o.createElement(l.CulledList,{enableMaxHeightGrouping:s,items:i,listItemHeight:n,itemBuffer:c,className:a,renderRow:this.renderRow,scrollThreshold:d,shouldUseWindowAsScrollContainer:!0,onRangeInView:this.handleRangeInView})},t.defaultProps={enableMaxHeightGrouping:!1,numThresholdRows:10,tilePadding:16,tileHeight:160,maxTileWidth:160,labelHeight:40,logTileLoading:!1,scrollDeltaThreshold:1,showLabels:!0,getTileItem:function(e,t){return null},handleTTI:function(){}},t})(o.PureComponent);t.InfiniteTileGrid=h}),define("modules/clean/react/maestro/tile_grid_logger",["require","exports","external/immutable","modules/clean/js_client_stopwatch","modules/core/browser"],function(e,t,i,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(function(){function e(e,t,o,n){var r=this;this.recordTileError=function(e){var t=Math.floor(e/r.numTilesPerPage);r.pagesWithThumbErrors.has(t)||(r.pagesWithThumbErrors=r.pagesWithThumbErrors.add(t))},this.recordTileLoaded=function(e,t,i){if(i){if(r.thumbsLoaded.has(e))return;r.thumbsLoaded=r.thumbsLoaded.add(e)}else{if(r.iconsLoaded.has(e))return;r.iconsLoaded=r.iconsLoaded.add(e)}var o=!1;o=r.numTiles%r.numTilesPerPage===0?e>=r.numTiles-r.numTilesPerPage:e>=r.numTiles-r.numTiles%r.numTilesPerPage;var n=r.numTilesPerPage;if(o){var a=r.numTiles%r.numTilesPerPage;0!==a&&(n=a)}var l=Math.floor(e/r.numTilesPerPage);if(i||!t){var s=r.numTilesFinalizedByPage,c=s.get(l)||0;r.numTilesFinalizedByPage=s.set(l,c+1)}if(0===l&&r.handleTTI){!(r.iconsLoaded.has(e)&&r.thumbsLoaded.has(e))&&(r.numTilesLoadedOnFirstPage++,r.numTilesLoadedOnFirstPage===n&&r.handleTTI())}i&&(r.pagesWithThumbs.has(l)||(r.pagesWithThumbs=r.pagesWithThumbs.add(l)),r.anyThumbLoadedTimeByPage.get(l)||(r.anyThumbLoadedTimeByPage=r.anyThumbLoadedTimeByPage.set(l,r.getTimeNow())),r.numTilesFinalizedByPage.get(l)===n&&(r.allThumbsLoadedTimeByPage=r.allThumbsLoadedTimeByPage.set(l,r.getTimeNow())))},this.pruneTrackedPages=function(){r.startTimeByPage.entrySeq().forEach(function(e){var t=e[0],i=e[1];!r.pagesToLog.has(t)&&!r.pagesCompletedLogging.has(t)&&r.getTimeNow()-i>2e3&&(r.startTimeByPage=r.startTimeByPage.delete(t))})},this.logCompletedPages=function(){r.pagesToLog.forEach(function(e){var t=r.startTimeByPage.get(e),i=Math.max(r.allThumbsLoadedTimeByPage.get(e),t),o=Math.max(r.anyThumbLoadedTimeByPage.get(e),t);return i&&!r.pagesWithThumbs.has(e)?void r.handlePageCompletedLogging(e):r.pagesWithThumbErrors.has(e)?void r.handlePageCompletedLogging(e):void(t&&i&&o&&(r.logPerfStats(e,t,o,i),r.handlePageCompletedLogging(e)))})},this.numTiles=e,this.numTilesPerPage=t,this.numTilesFinalizedByPage=i.List(),this.numTilesLoadedOnFirstPage=0,this.iconsLoaded=i.Set(),this.thumbsLoaded=i.Set(),this.startTimeByPage=i.Map(),this.allThumbsLoadedTimeByPage=i.Map(),this.anyThumbLoadedTimeByPage=i.Map(),this.pagesWithThumbErrors=i.Set(),this.pagesWithThumbs=i.Set(),this.pagesCompletedLogging=i.Set(),this.pagesToLog=i.Set(),this.handleTTI=n}return e.prototype.getTimeNow=function(){var e=n.performance(),t=-1;return e&&e.now&&(t=e.now()),t},e.prototype.updateNumTiles=function(e){this.numTiles>=e||(this.numTiles=e)},e.prototype.handlePageCompletedLogging=function(e){this.pagesCompletedLogging=this.pagesCompletedLogging.add(e),this.pagesToLog=this.pagesToLog.delete(e),this.startTimeByPage=this.startTimeByPage.delete(e),this.anyThumbLoadedTimeByPage=this.anyThumbLoadedTimeByPage.delete(e),this.allThumbsLoadedTimeByPage=this.allThumbsLoadedTimeByPage.delete(e)},e.logThumbLoadError=function(){o.JSStopwatch.recordTrace("visual_browse_thumb_load_error",{stopwatchName:"infinite_tile_grid_logging",traceTime:0})},e.logThumbRTT=function(e){o.JSStopwatch.recordTrace("visual_browse_thumb_rtt",{stopwatchName:"infinite_tile_grid_logging",traceTime:e})},e.prototype.logPerfStats=function(e,t,i,n){o.JSStopwatch.recordTrace("loaded_any_thumbs_page_"+e,{stopwatchName:"infinite_tile_grid_logging",traceTime:i-t}),o.JSStopwatch.recordTrace("loaded_all_thumbs_page_"+e,{stopwatchName:"infinite_tile_grid_logging",traceTime:n-t})},e})();t.InfiniteTileGridLogger=r}),define("modules/clean/react/outside_event",["require","exports","tslib","external/react","external/prop-types","external/lodash","modules/clean/react/util"],function(e,t,i,o,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=o.createElement,s=function(e,t,s,c){var d=null!=e.displayName?e.displayName:"UnnamedComponent";return u=(function(o){function n(){var e=null!==o&&o.apply(this,arguments)||this;return e._handleOutsideEvent=function(t){return"function"==typeof e.props[c]?e.props[c](t):void 0},e._handleInsideEvent=function(t){return t.stopPropagation(),"function"==typeof t.nativeEvent.stopImmediatePropagation&&t.nativeEvent.stopImmediatePropagation(),"function"==typeof e.props[s]?e.props[s](t):void 0},e}return i.__extends(n,o),n.prototype.componentDidMount=function(){return document.addEventListener(t,this._handleOutsideEvent,!1)},n.prototype.componentWillUnmount=function(){return document.removeEventListener(t,this._handleOutsideEvent,!1)},n.prototype.render=function(){return l(e,a.mergeProps(r.omit(this.props,s,c,"children"),(t={},t[s]=this._handleInsideEvent,t)),this.props.children);var t},n})(o.Component),u.displayName="Outside"+t+"Handled"+d,u.propTypes=(p={},p[s]=n.func,p[c]=n.func,p),u;var u,p};t.addOutsideEventHandling=s;var c=s("div","click","onClick","onOutsideClick");t.OutsideClickHandler=c;var d=s("div","mousedown","onMouseDown","onOutsideMouseDown");t.OutsideMouseDownHandler=d}),define("modules/clean/react/selection",["require","exports","tslib","external/immutable"],function(e,t,i,o){"use strict";function n(e,t){return new r({selected:e?o.OrderedSet(e):o.OrderedSet(),anchor:t||(e?e[0]:null)})}Object.defineProperty(t,"__esModule",{value:!0});var r=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t})(o.Record({selected:null,anchor:null},"Selection"));t.Selection=r,t.createSelection=n}),define("modules/clean/sharing/browse_exports",["require","exports","tslib","modules/core/browser","modules/constants/sharing","modules/clean/sharing/gating_util","modules/clean/sharing/async_share_modal_util","modules/clean/sharing/public_folder/public_folder","modules/clean/sharing/wizard/async_wizard_modals"],function(e,t,i,o,n,r,a,l,s){"use strict";function c(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e(["modules/clean/sharing/shared_content_link_sync_utils"],function(e){return e.mountSharedFolder.apply(e,t)})}function d(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(i){return[2,new Promise(function(i,o){e(["modules/clean/sharing/ui_util"],function(e){i(e.genContentManagerBridgeUri.apply(void 0,t))},o)})]})})}function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.__awaiter(this,void 0,void 0,function(){var t;return i.__generator(this,function(i){switch(i.label){case 0:return[4,d.apply(void 0,e)];case 1:return t=i.sent(),o.open_tab(t.toString()),[2]}})})}function p(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e(["modules/clean/sharing/cdm_new_folder_modal"],function(e){e.showCdmNewFolderModal.apply(e,t)})}function h(t){return i.__awaiter(this,void 0,void 0,function(){var o;return i.__generator(this,function(i){switch(i.label){case 0:return[4,new Promise(function(t,i){e(["modules/clean/sharing/cdm_new_folder_modal_util"],t,i)})];case 1:return o=i.sent(),o.showAppropriateNewFolderModalForCdmUser(t),[2]}})})}function m(){return i.__awaiter(this,void 0,void 0,function(){var t;return i.__generator(this,function(i){switch(i.label){case 0:return n.SHARING_EXPERIMENTS.ENABLE_INVITE_POPUP?[4,new Promise(function(t,i){e(["modules/clean/sharing/invite_prompt_modal"],t,i)})]:[3,2];case 1:t=i.sent().maybeShowInvitePromptModal,t("create-folder-success"),i.label=2;case 2:return[2]}})})}Object.defineProperty(t,"__esModule",{value:!0}),t.asyncMountSharedFolder=c,t.asyncGoToContentManagerForPath=u,t.asyncShowCdmNewFolderModal=p,t.asyncShowAppropriateNewFolderModalForCdmUser=h,t.asyncShowInvitePromptModal=m,t.GoldenGate=r.GoldenGate,t.asyncShowShareModal=a.asyncShowShareModal,t.asyncShowNewFolderShareModal=a.asyncShowNewFolderShareModal,t.asyncShowPrefilledShareModal=a.asyncShowPrefilledShareModal,t.asyncShowSharedContentLinkSyncModal=a.asyncShowSharedContentLinkSyncModal,t.makePublicFolderLink=l.makePublicFolderLink,t.shouldUsePublicFolderSharing=l.shouldUsePublicFolderSharing,t.showPublicFolderLinkModal=l.showPublicFolderLinkModal,t.asyncShowShareAFolderWizardModal=s.asyncShowShareAFolderWizardModal}),define("modules/clean/sharing/constants",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){e[e.PUBLIC=1]="PUBLIC",e[e.TEAM_ONLY=2]="TEAM_ONLY",e[e.PASSWORD=3]="PASSWORD",e[e.ONLY_YOU=99]="ONLY_YOU"})(t.SHMODEL_LINK_TOKEN_VISIBILITY||(t.SHMODEL_LINK_TOKEN_VISIBILITY={})),t.MEMBER_ACTION={LEAVE_A_COPY:"leave_a_copy",MAKE_EDITOR:"make_editor",MAKE_OWNER:"make_owner",MAKE_VIEWER:"make_viewer",MAKE_VIEWER_NO_COMMENT:"make_viewer_no_comment",REMOVE:"remove",ALL:["leave_a_copy","make_editor","make_owner","make_viewer","make_viewer_no_comment","remove"]},t.SNIPPET_SIZES={FILENAME:22,DISPLAY_NAME:26,EMAIL:30,OUT_OF_QUOTA_FOLDER_NAME:15},t.VALIDATE_PATH_PERMISSIONS={change_options:"canChangeOptions",disable_viewer_info:"disableViewerInfo",edit_contents:"canEditContents",enable_viewer_info:"enableViewerInfo",invite_editor:"canInviteEditor",invite_viewer:"canInviteViewer",invite_viewer_no_comment:"canInviteViewerNoComment",unshare:"canUnshareFolder",relinquish_membership:"canRelinquishMembership"},t.VALIDATE_PATH_PERMISSIONS_CONFIDENTIAL_AWARE={change_options:"canChangeOptions",disable_viewer_info:"disableViewerInfo",edit_contents:"canEditContents",enable_viewer_info:"enableViewerInfo",invite_editor:"canInviteEditor",invite_viewer:"canInviteViewer",invite_viewer_no_comment:"canInviteViewerNoComment",unshare:"canUnshareFolder",update_confidentiality:"canUpdateConfidentiality",relinquish_membership:"canRelinquishMembership"},t.ALPHA_FOLDER_METADATA_PERMISSIONS={change_options:"canChangeOptions",disable_viewer_info:"disableViewerInfo",edit_contents:"canEditContents",enable_viewer_info:"enableViewerInfo",invite_editor:"canInviteEditor",invite_viewer:"canInviteViewer",invite_viewer_no_comment:"canInviteViewerNoComment",leave_a_copy:"leaveACopy",relinquish_membership:"canRelinquishMembership",remove_download_policy:"removeDownloadPolicy",set_download_policy:"setDownloadPolicy",unmount:"canUnmountFolder",unshare:"canUnshareFolder",update_confidentiality:"canUpdateConfidentiality"},t.ALPHA_FILE_METADATA_PERMISSIONS={change_options:"canChangeOptions",disable_viewer_info:"disableViewerInfo",enable_viewer_info:"enableViewerInfo",invite_viewer:"canInviteViewer",invite_viewer_no_comment:"canInviteViewerNoComment",relinquish_membership:"canRelinquishMembership",remove_download_policy:"removeDownloadPolicy",set_download_policy:"setDownloadPolicy",unshare:"unshare"},t.FILE_METADATA_PERMISSIONS={invite_viewer:"canInviteViewer",invite_viewer_no_comment:"canInviteViewerNoComment",relinquish_membership:"canRelinquishMembership",unshare:"unshare"},t.SHARE_ACTION_ORIGIN_TYPE={BROWSE_FILE_ACTIONS:"BROWSE_FILE_ACTIONS",BROWSE_FILE_ROW:"BROWSE_FILE_ROW",BROWSE_GLOBAL_ACTIONS:"BROWSE_GLOBAL_ACTIONS",BROWSE_SHARED_FOLDER_BANNER:"BROWSE_SHARED_FOLDER_BANNER",CONTENT_MANAGER:"CONTENT_MANAGER",DESKTOP_CLIENT:"DESKTOP_CLIENT",EVENTS_PAGE:"EVENTS_PAGE",FILE_ROW_SHARE_MENU:"FILE_ROW_SHARE_MENU",GRANT_ACCESS:"GRANT_ACCESS",LEGACY_BROWSE:"LEGACY_BROWSE",LINKS_PAGE:"LINKS_PAGE",NOTIFICATION_WEB:"NOTIFICATION_WEB",OFFICE_INTEGRATION:"OFFICE_INTEGRATION",OUT_OF_QUOTA_MODAL:"OUT_OF_QUOTA_MODAL",PARENT_FOLDER_MODAL:"PARENT_FOLDER_MODAL",PREVIEW_PAGE:"PREVIEW_PAGE",PREVIEW_PAGE_FACEPILE:"PREVIEW_PAGE_FACEPILE",RECENTS:"RECENTS",SHARE:"SHARE",SHARE_LINK_MODAL:"SHARE_LINK_MODAL",SYNC_MODAL:"SYNC_MODAL",WIZARD:"WIZARD"};(function(e){e.Content="c",e.Shmodel="s"})(t.SharedLinkType||(t.SharedLinkType={}))}),define("modules/clean/sharing/gating_util",["require","exports","modules/constants/sharing"],function(e,t,i){"use strict";function o(e){return i.TRUELINK.NO_COMMENT_ENABLED&&!!(null!=e?i.TRUELINK.NO_COMMENT_ENABLED[e.id]:void 0)}Object.defineProperty(t,"__esModule",{value:!0}),t.GoldenGate={hasNewOwnershipModel:function(e){return Boolean(i.GOLDEN_GATE.HAS_NEW_OWNERSHIP_MODEL[e])},hasContentManagerAndSuperAdmin:function(e){return Boolean(i.GOLDEN_GATE.HAS_CONTENT_MANAGER_AND_SUPER_ADMIN[e])},hasContentManagerActionsDisabled:function(e){return Boolean(i.GOLDEN_GATE.HAS_CONTENT_MANAGER_ACTIONS_DISABLED[e])},hasContentManagerCdm:function(e){return Boolean(i.GOLDEN_GATE.HAS_CONTENT_MANAGER_CDM[e])},hasContentManagerFolderRestore:function(e){return Boolean(i.GOLDEN_GATE.CAN_RESTORE_FOLDERS_IN_CM[e])},SHARING_TOTAL_LIMIT:i.GOLDEN_GATE.SHARING_TOTAL_LIMIT},t.isUserNoCommentEnabled=o}),define("modules/clean/sharing/public_folder/public_folder",["require","exports","modules/core/uri","modules/constants/public_folder_constants"],function(e,t,i,o){"use strict";function n(e,t){if(e.publicAppToken)return t;if(!e.isPublicFolderEnabled)return null;var i=(e.publicFolderFqPath||"/public").toLowerCase(),o=t.toLowerCase();return o===i?"/":o.startsWith(i+"/")?t.substring(i.length):null}
function r(e,t){return null!=n(e,t)}function a(e,t,r,a){if(a)return null;var l,s=n(t,r);if(l=o.SHOULD_REDIRECT_URL?"u"+e+".dl.dropboxusercontent.com":"dl.dropboxusercontent.com",null!=s){var c=new i.URI({scheme:"https",authority:l});return t.publicAppToken?(c.setPath("/spa/"+t.publicAppToken+s+"/data"),c.toString()):(c.setPath("/u/"+e+s),c.toString())}return null}function l(t){return new Promise(function(i,o){e(["external/react","modules/clean/react/modal","modules/clean/sharing/public_folder/modal"],function(e,o,n){var r=o.Modal,a=n.CopyPublicLinkModal;r.showInstance(e.createElement(a,{publicLink:t})),i()})})}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUsePublicFolderSharing=r,t.makePublicFolderLink=a,t.showPublicFolderLinkModal=l});
//# sourceMappingURL=pkg-browse-and-photos.min.js-vflm7HiPF.map